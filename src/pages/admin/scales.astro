---
import AdminLayout from '@/layouts/AdminLayout.astro'
import { ScalesManager } from '@/components/admin/ScalesManager'
import { createSupabaseServerClient } from '@/lib/supabase'

const supabase = createSupabaseServerClient(Astro.cookies)
const { data: periods } = await supabase
  .from('reca_periods')
  .select('id, code, year, semester')
  .order('code', { ascending: false })
---

<AdminLayout title="Escalas">
  <div class="space-y-6">
    <div>
      <h1 class="text-2xl font-bold text-foreground">Escalas por Categoría</h1>
      <p class="text-muted-foreground mt-1">
        Define los límites de cada categoría (A-K) para los períodos de recategorización.
      </p>
    </div>
    <ScalesManager client:load periods={periods || []} />
  </div>
</AdminLayout>
